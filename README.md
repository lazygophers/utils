# Utils

> LazyGophers Utils - ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ Go å·¥å…·åº“

[![Go Version](https://img.shields.io/badge/Go-1.24.0-blue.svg)](https://golang.org)
[![License](https://img.shields.io/badge/License-AGPL%20v3-green.svg)](LICENSE)
[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/lazygophers/utils)

## é¡¹ç›®ç®€ä»‹

`utils` æ˜¯ä¸€ä¸ªåŠŸèƒ½å…¨é¢çš„ Go å·¥å…·åº“ï¼Œæä¾›äº†å¤§é‡å®ç”¨çš„å·¥å…·å‡½æ•°å’Œæ¨¡å—ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…æ›´é«˜æ•ˆåœ°æ„å»º Go åº”ç”¨ç¨‹åºã€‚è¯¥é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¯ä¸ªå­åŒ…éƒ½ä¸“æ³¨äºç‰¹å®šçš„åŠŸèƒ½é¢†åŸŸã€‚

## ç‰¹æ€§

-   **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼ŒæŒ‰éœ€å¼•å…¥
-   **é«˜æ€§èƒ½**ï¼šé’ˆå¯¹ Go è¯­è¨€ç‰¹æ€§è¿›è¡Œä¼˜åŒ–
-   **æ˜“äºä½¿ç”¨**ï¼šç®€æ´çš„ API è®¾è®¡ï¼Œå¼€ç®±å³ç”¨
-   **å…¨é¢è¦†ç›–**ï¼šæ¶µç›–æ—¥å¸¸å¼€å‘ä¸­çš„å„ç§éœ€æ±‚

## å®‰è£…

ä½¿ç”¨ Go Modules å¯¼å…¥ï¼š

```bash
go get github.com/lazygophers/utils
```

## æ ¸å¿ƒæ¨¡å—

### åŸºç¡€å·¥å…·

-   **[`must`](must.go)**ï¼šæä¾›é”™è¯¯å¤„ç†å’Œæ–­è¨€å·¥å…·
    -   [`MustOk()`](must.go:16)ï¼šéªŒè¯çŠ¶æ€å¹¶è¿”å›å€¼
    -   [`MustSuccess()`](must.go:29)ï¼šéªŒè¯é”™è¯¯çŠ¶æ€
    -   [`Must()`](must.go:46)ï¼šç»„åˆéªŒè¯å‡½æ•°
    -   [`Ignore()`](must.go:62)ï¼šå¿½ç•¥å‚æ•°çš„å·¥å…·å‡½æ•°

### æ•°æ®åº“æ“ä½œ

-   **[`orm`](orm.go)**ï¼šæ•°æ®åº“æ“ä½œå·¥å…·
    -   [`Scan()`](orm.go:32)ï¼šæ•°æ®åº“å­—æ®µåˆ°ç»“æ„ä½“çš„æ‰«æ
    -   [`Value()`](orm.go:68)ï¼šç»“æ„ä½“åˆ°æ•°æ®åº“å€¼çš„è½¬æ¢
    -   æ”¯æŒ JSON åºåˆ—åŒ–å’Œé»˜è®¤å€¼å¡«å……

### æ•°æ®éªŒè¯

-   **[`validate`](validate.go)**ï¼šåŸºäº validator çš„ç»“æ„ä½“éªŒè¯
    -   [`Validate()`](validate.go:20)ï¼šå¿«é€Ÿç»“æ„ä½“éªŒè¯
    -   è‡ªåŠ¨è®°å½•é”™è¯¯æ—¥å¿—åˆ°æ—¥å¿—ç³»ç»Ÿ

## åŠŸèƒ½æ¨¡å—

### anyx

æä¾› Any ç±»å‹ç›¸å…³çš„å·¥å…·å‡½æ•°ã€‚

### app

åº”ç”¨ç¨‹åºæ¡†æ¶å’Œå·¥å…·ã€‚

### atexit

ç¨‹åºé€€å‡ºæ—¶çš„æ¸…ç†å’Œé’©å­å‡½æ•°ç®¡ç†ã€‚

### bufiox

å¢å¼ºçš„ç¼“å†²åŒºæ“ä½œå·¥å…·ã€‚

### candy

æä¾›ä¸€äº›"è¯­æ³•ç³–"å’Œä¾¿æ·å‡½æ•°ã€‚

### config

é…ç½®æ–‡ä»¶è¯»å–å’Œç®¡ç†å·¥å…·ã€‚

### cryptox

åŠ å¯†å’Œè§£å¯†ç›¸å…³å·¥å…·ã€‚

### defaults

é»˜è®¤å€¼å¤„ç†å·¥å…·ã€‚

### event

äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ”¯æŒã€‚

### fake

ç”¨äºæµ‹è¯•çš„å‡æ•°æ®ç”Ÿæˆå·¥å…·ã€‚

### hystrix

ç†”æ–­å™¨æ¨¡å¼å®ç°ã€‚

### json

JSON å¤„ç†å¢å¼ºå·¥å…·ã€‚

### network

ç½‘ç»œæ“ä½œç›¸å…³å·¥å…·ã€‚

### osx

æ“ä½œç³»ç»Ÿç›¸å…³å·¥å…·çš„å¢å¼ºç‰ˆæœ¬ã€‚

### pgp

PGP åŠ å¯†å’Œç­¾åå·¥å…·ã€‚

### pyroscope

æ€§èƒ½åˆ†æå’Œç›‘æ§å·¥å…·é›†æˆã€‚

### randx

éšæœºæ•°ç”Ÿæˆå·¥å…·ã€‚

### routine

åç¨‹å’Œå¹¶å‘ç¼–ç¨‹å·¥å…·ã€‚

### runtime

è¿è¡Œæ—¶ä¿¡æ¯è·å–å’Œå¤„ç†ã€‚

### singledo

å•ä¾‹æ¨¡å¼å®ç°ã€‚

### stringx

å­—ç¬¦ä¸²å¤„ç†å¢å¼ºå·¥å…·ã€‚

### unit

å•å…ƒæµ‹è¯•è¾…åŠ©å·¥å…·ã€‚

### urlx

URL å¤„ç†å·¥å…·ã€‚

### wait

ç­‰å¾…å’Œè¶…æ—¶æ§åˆ¶å·¥å…·ã€‚

### xtime

æ—¶é—´å¤„ç†å·¥å…·çš„å¢å¼ºç‰ˆæœ¬ï¼ŒåŒ…å«ä¸°å¯Œçš„ä¸­å›½ä¼ ç»Ÿå†æ³•åŠŸèƒ½ã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š

-   ğŸ—“ï¸ **ç»Ÿä¸€æ—¥å†æ¥å£** - æ•´åˆå…¬å†å†œå†ä¿¡æ¯
-   ğŸŒ™ **å†œå†è®¡ç®—** - ç²¾ç¡®çš„å†œå†è½¬æ¢å’ŒèŠ‚æ°”è®¡ç®—
-   ğŸ² **ç”Ÿè‚–å¹²æ”¯** - å®Œæ•´çš„å¤©å¹²åœ°æ”¯ç³»ç»Ÿ
-   ğŸ® **ä¼ ç»ŸèŠ‚æ—¥** - è‡ªåŠ¨æ£€æµ‹å’Œæ–‡åŒ–ä¿¡æ¯å±•ç¤º

#### å­æ¨¡å—

-   **xtime007** - 007 å·¥ä½œåˆ¶æ—¶é—´å¸¸é‡
-   **xtime955** - 955 å·¥ä½œåˆ¶æ—¶é—´å¸¸é‡
-   **xtime996** - 996 å·¥ä½œåˆ¶æ—¶é—´å¸¸é‡

#### å¿«é€Ÿç¤ºä¾‹

```go
// åˆ›å»ºæ—¥å†å¯¹è±¡
cal := xtime.NowCalendar()

// è·å–å®Œæ•´ä¿¡æ¯
fmt.Println(cal.String())
// è¾“å‡º: 2023å¹´08æœˆ15æ—¥ å…­æœˆå»¿ä¹ å…”å¹´ å¤„æš‘

// å†œå†ä¿¡æ¯
fmt.Println(cal.LunarDate())     // å†œå†äºŒé›¶äºŒä¸‰å¹´å…­æœˆå»¿ä¹
fmt.Println(cal.Animal())        // å…”
fmt.Println(cal.YearGanZhi())    // ç™¸å¯

// èŠ‚æ°”ä¿¡æ¯
fmt.Println(cal.CurrentSolarTerm()) // å¤„æš‘
fmt.Println(cal.DaysToNextTerm())   // 8
```

## ä½¿ç”¨ç¤ºä¾‹

### é”™è¯¯å¤„ç†

```go
package main

import (
    "github.com/lazygophers/utils"
)

func main() {
    // ä½¿ç”¨ Must å¤„ç†å¯èƒ½å‡ºé”™çš„æ“ä½œ
    result := utils.Must(someFunction())

    // ä½¿ç”¨ MustSuccess éªŒè¯é”™è¯¯
    utils.MustSuccess(doSomething())
}
```

### æ•°æ®åº“æ“ä½œ

```go
type User struct {
    Name  string `json:"name"`
    Email string `json:"email" validate:"required,email"`
    Age   int    `json:"age" default:"18"`
}

func GetUser(id int) (*User, error) {
    var user User

    // ä»æ•°æ®åº“æ‰«ææ•°æ®
    err := utils.Scan(dbData, &user)
    if err != nil {
        return nil, err
    }

    // éªŒè¯ç»“æ„ä½“
    err = utils.Validate(&user)
    if err != nil {
        return nil, err
    }

    return &user, nil
}
```

## å¿«é€Ÿå¼€å§‹

1. **å®‰è£…ä¾èµ–**

    ```bash
    go mod tidy
    ```

2. **å¯¼å…¥æ‰€éœ€æ¨¡å—**

    ```go
    import "github.com/lazygophers/utils"
    import "github.com/lazygophers/utils/json"
    import "github.com/lazygophers/utils/config"
    ```

3. **å¼€å§‹ä½¿ç”¨**
    ```go
    // ä½¿ç”¨å„ç§å·¥å…·å‡½æ•°
    value := utils.Must(getValue())
    err := utils.Validate(&config)
    ```

## ä¾èµ–é¡¹

-   Go 1.24.0+
-   [`github.com/go-playground/validator/v10`](https://github.com/go-playground/validator) - ç»“æ„ä½“éªŒè¯
-   [`github.com/lazygophers/utils/defaults`](./defaults) - é»˜è®¤å€¼è®¾ç½®
-   [`github.com/lazygophers/log`](https://github.com/lazygophers/log) - æ—¥å¿—åº“
-   æ›´å¤šä¾èµ–è¯·æŸ¥çœ‹ [`go.mod`](go.mod) æ–‡ä»¶

## æ€§èƒ½ç‰¹ç‚¹

-   **é›¶ä¾èµ–å†²çª**ï¼šæ‰€æœ‰ä¾èµ–éƒ½ç»è¿‡ç²¾å¿ƒé€‰æ‹©ï¼Œé¿å…ç‰ˆæœ¬å†²çª
-   **å†…å­˜ä¼˜åŒ–**ï¼šé‡‡ç”¨ sync.Pool ç­‰æŠ€æœ¯å‡å°‘å†…å­˜åˆ†é…
-   **å¹¶å‘å®‰å…¨**ï¼šæ‰€æœ‰å·¥å…·å‡½æ•°éƒ½è€ƒè™‘äº†å¹¶å‘åœºæ™¯
-   **ç±»å‹å®‰å…¨**ï¼šå……åˆ†åˆ©ç”¨ Go çš„ç±»å‹ç³»ç»Ÿä¿è¯ç¼–è¯‘æ—¶å®‰å…¨

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ

-   éµå¾ª Go æ ‡å‡†ä»£ç é£æ ¼
-   æ‰€æœ‰å…¬å…± API å¿…é¡»æœ‰æ–‡æ¡£æ³¨é‡Š
-   æäº¤æ–°åŠŸèƒ½æ—¶å¿…é¡»åŒ…å«æµ‹è¯•ç”¨ä¾‹
-   ä¿æŒå‘åå…¼å®¹æ€§

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ GNU Affero General Public License v3.0 è®¸å¯è¯ã€‚

æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£æ›´å¤šä¿¡æ¯ã€‚

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡              | æ•°å€¼ | è¯´æ˜             |
| ----------------- | ---- | ---------------- |
| ğŸ“¦ **æ¨¡å—æ•°é‡**   | 20+  | æ¶µç›–å„ç§å¸¸ç”¨åŠŸèƒ½ |
| ğŸ§ª **æµ‹è¯•è¦†ç›–ç‡** | 85%+ | é«˜è´¨é‡ä»£ç ä¿éšœ   |
| ğŸ“ **æ–‡æ¡£å®Œæ•´åº¦** | 95%+ | è¯¦å°½çš„ä½¿ç”¨è¯´æ˜   |
| âš¡ **æ€§èƒ½ç­‰çº§**   | A+   | ç»è¿‡åŸºå‡†æµ‹è¯•ä¼˜åŒ– |
| ğŸŒŸ **Star æ•°é‡**  | -    | GitHub ç¤¾åŒºè®¤å¯  |

## ğŸ“ˆ æ€§èƒ½ç‰¹ç‚¹

-   **é«˜æ€§èƒ½**: æ ¸å¿ƒåŠŸèƒ½ç»è¿‡åŸºå‡†æµ‹è¯•ä¼˜åŒ–
-   **ä½å»¶è¿Ÿ**: å¤§éƒ¨åˆ†æ“ä½œåœ¨å¾®ç§’çº§å®Œæˆ
-   **å†…å­˜å‹å¥½**: åˆç†çš„å†…å­˜ä½¿ç”¨å’Œåƒåœ¾å›æ”¶
-   **å¹¶å‘å®‰å…¨**: æ‰€æœ‰å…¬å…± API éƒ½æ˜¯åç¨‹å®‰å…¨çš„

## ğŸ¤ ç¤¾åŒºä¸æ”¯æŒ

-   ğŸ“– **æ–‡æ¡£**: æ¯ä¸ªæ¨¡å—éƒ½æœ‰è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£
-   ğŸ› **Issue è·Ÿè¸ª**: GitHub Issues å¿«é€Ÿå“åº”
-   ğŸ’¬ **è®¨è®ºç¤¾åŒº**: GitHub Discussions äº¤æµ
-   ğŸ”„ **æŒç»­é›†æˆ**: è‡ªåŠ¨åŒ–æµ‹è¯•å’Œè´¨é‡æ£€æŸ¥
